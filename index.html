<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Westall Masjid ‚Äî Upcoming Events</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        h1 { color: #006400; }
        h2 { margin-top: 30px; color: #444; }
        .event-card {
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 12px;
            margin: 10px 0;
            box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
        }
        .date { font-weight: bold; color: #b22222; }
        .special { background-color: #fdf5e6; border-left: 5px solid #ff8c00; }
    </style>
</head>
<body>
<h1>üïå Westall Masjid ‚Äî Upcoming Events</h1>
<div id="events"></div>

<script>
    // Weekly recurring activities (by weekday)
    const weeklyActivities = [
        { day: 1, time: "Between Maghrib & Isha", name: "Arabic Class (English)", speaker: "Ust. Umair ‚Äî PIC: Br. Choirul En" },
        { day: 2, time: "Before Maghrib", name: "Quranic Literacy (Kids)", speaker: "Ust. Widodo" },
        { day: 2, time: "Between Maghrib & Isha", name: "Kids Tahsin Class", speaker: "Sr. Mashael & Sr. Geby" },
        { day: 3, time: "Between Maghrib & Isha", name: "Quran Tahsin & Memorisation", speaker: "Ust. Umair ‚Äî PIC: Br. Jimmy" },
        { day: 4, time: "Between Maghrib & Isha", name: "Sisters‚Äô Tahsin Class", speaker: "Sr. Mashael & Sr. Desy" },
        { day: 5, time: "Between Maghrib & Isha", name: "Group Tafsir Class", speaker: "Ust. Umair / Sulaimaniyah ‚Äî PIC: Br. Abyan" },
        { day: 6, time: "Fortnightly", name: "Thematic Hadith Class", speaker: "Ust. Umair ‚Äî PIC: Br. Choirul En" },
        { day: 0, time: "6.30 ‚Äì 7.30 am", name: "Tahsin Class (General)", speaker: "Indonesia group" },
        { day: 0, time: "10.00 am ‚Äì 1.00 pm", name: "Madrasah Westall (Kids)", speaker: "Volunteers Needed" }
    ];

    // Special dated events (fixed once-off)
    const specialEvents = [
        { date: "2025-09-13T16:30:00", name: "Muallaf Program Launch", details: "With IMCV, guest speaker Br. David Gould", location: "Westall Masjid" },
        { date: "2025-10-05T19:00:00", name: "Special Lecture: Dr. Aisah Dahlan", details: "Theme: 'Kenali Watak agar Jiwa Tenang'", location: "Online & Onsite" }
    ];

    // Helper: format date
    function formatDate(dateObj) {
        return dateObj.toLocaleDateString("en-AU", { weekday: "long", day: "numeric", month: "long", year: "numeric" });
    }

    function getUpcomingEvents() {
        const today = new Date();
        const events = [];

        // Add weekly recurring for next 7 days
        for (let i = 0; i < 7; i++) {
            const checkDate = new Date();
            checkDate.setDate(today.getDate() + i);
            const day = checkDate.getDay();
            weeklyActivities.forEach(act => {
                if (act.day === day) {
                    events.push({
                        date: checkDate,
                        name: act.name,
                        details: act.speaker,
                        time: act.time,
                        type: "weekly"
                    });
                }
            });
        }

        // Add special events within the next 60 days
        specialEvents.forEach(se => {
            const eventDate = new Date(se.date);
            if (eventDate >= today) {
                events.push({
                    date: eventDate,
                    name: se.name,
                    details: se.details,
                    time: eventDate.toLocaleTimeString("en-AU", { hour: "2-digit", minute: "2-digit" }),
                    type: "special",
                    location: se.location
                });
            }
        });

        // Sort by date/time
        events.sort((a, b) => a.date - b.date);
        return events.slice(0, 8); // show only next 8
    }

    function displayEvents() {
        const container = document.getElementById("events");
        const events = getUpcomingEvents();
        events.forEach(ev => {
            const div = document.createElement("div");
            div.className = "event-card" + (ev.type === "special" ? " special" : "");
            div.innerHTML = `
          <div class="date">${formatDate(ev.date)} ‚Äî üïì ${ev.time}</div>
          <div><strong>${ev.name}</strong></div>
          <div>${ev.details}</div>
          ${ev.location ? `<div>üìç ${ev.location}</div>` : ""}
        `;
            container.appendChild(div);
        });
    }

    displayEvents();
</script>
</body>
</html>